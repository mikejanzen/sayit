<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Random Command Speaker</title>
</head>
<body>
  <h1>Random Command Speaker</h1>
  <label for="commands">Enter commands (comma-separated):</label><br>
  <textarea type="text" rows="7" cols="50" id="commands">
Right Turn, 
Left Turn, 
About Turn, 
Left Incline, 
Right Incline
  </textarea> 
  <br><br>
  <label for="minSleep">Random pause between commands from</label>
  <input type="number" id="minSleep" value="1.5" step="0.1">
  <label for="maxSleep">to</label>
  <input type="number" id="maxSleep" value="3" step="0.1">
  <br><br>
  <label for="speechRate">Speech Rate</label>
  <input type="number" id="speechRate" value="1.0" step="0.1">
  <br><br>
  <button id="startButton">Start</button>
  <button id="stopButton" disabled="true">Stop</button>

  <script>
    const startButton = document.getElementById('startButton');
    const stopButton = document.getElementById('stopButton');
    let speakingInterval;
    let stopper = false;

    // Function to speak a command
    function speakCommand(command) {
      const synth = window.speechSynthesis;
      const utterance = new SpeechSynthesisUtterance(command);
      const speechRate = parseFloat(document.getElementById('speechRate').value);
      utterance.rate = speechRate;
      synth.speak(utterance);
    }

    // Start speaking commands
    startButton.addEventListener('click', () => {
      
      if (speakingInterval) clearInterval(speakingInterval);

      function speakRandomCommand() {

        if (this.stopper == true){
          this.stopper = false;
          startButton.disabled = false;
          stopButton.disabled = true;

          return;
       }

        const commandsInput = document.getElementById('commands').value;
        const minSleep = parseFloat(document.getElementById('minSleep').value);
        const maxSleep = parseFloat(document.getElementById('maxSleep').value);
        const commands = commandsInput.split(',').map(cmd => cmd.trim());

        const command = commands[Math.floor(Math.random() * commands.length)];
        speakCommand(command);
        const nextInterval = (Math.random() * (maxSleep - minSleep) + minSleep) * 1000;
        speakingInterval = setTimeout(speakRandomCommand, nextInterval);
      }
      startButton.disabled = true;
      stopButton.disabled = false;
      speakRandomCommand();
    });

    // Stop speaking commands
    stopButton.addEventListener('click', () => {
      this.stopper = true;
    });
  </script>
</body>
</html>
